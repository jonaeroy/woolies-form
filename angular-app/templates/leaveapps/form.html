{% extends 'layouts/main.html' %}

{% block layout_head %}
    {{super}}
    <link rel="stylesheet" href="/css/jquery/ui/1_10_3/themes/smoothness/jquery-ui.css" />
    <script src="/js/jquery/ui/1_10_3/jquery-ui.js"></script>
    <script type='text/javascript' src='/js/angular/angular.js'></script>
    <script type='text/javascript' src='/js/spinner/jquery.mousewheel.js'></script>
    <script type='text/javascript' src='/js/main.js'></script>
    <script type='text/javascript' src='/js/utils.js'></script>
    <script type="text/javascript" src="/js/date-en-AU.js"></script>
    
    

    <script type='text/javascript'>

        //spinners
        $(function() {
            var spinner = $( ".spnr" ).spinner({
                min: 0,
                max: 24
            });
        });
        //spinners

        $(document).ready(function(){

        //Datepickers
            var dateToday = new Date;

            $('.date_pickr').datepicker({
                dateFormat: 'dd-mm-yy',
                minDate: dateToday
            });


            for (i=1; i<=4; i++) {
                $('#LD_First_Working_DOL'+[i]).change(function(){
                    var bits = $(this).val().split('-');
                    var end = new Date(bits[2], bits[1] - 1, bits[0])

                    $('#LD_Last_Working_DOL'+[i]).val($.datepicker.formatDate('dd-mm-yy', end));
                    $('#LD_Last_Working_DOL'+[i]).datepicker("option", "minDate", end);

                });
            }
        //Datepickers

        //Compute Total of On and Off Hours Week
            $('.hoursonweek').blur(function () {
                var sum = 0;
                $('.hoursonweek').each(function() {
                    sum += Number($(this).val());
                });
                
                $('#RD_On_Total').val(sum);
            });

            $('.hoursoffweek').blur(function () {
                var sum = 0;
                $('.hoursoffweek').each(function() {
                    sum += Number($(this).val());
                });
                
                $('#RD_Off_Total').val(sum);
            });
        //Compute Total of On and Off Hours Week
        });

        
        
        
        function processLeaveLine(bDateChange, rowId)
        {
          //     Current line control Ids
          var firstWorkDateId   = '#LD_First_Working_DOL' + rowId;
            var lastWorkDateId    = '#LD_Last_Working_DOL'  + rowId;
            var workDaysOnLeaveId = '#LD_Total_Number_WH'   + rowId;
            var returnWorkDateId  = '#LD_Date_RTW'          + rowId;
            
            //  Obtain current values for the controls
            var firstWorkingDateText = $(firstWorkDateId).val();
            var lastWorkingDateText  = $(lastWorkDateId).val();
            var workDays             = $(workDaysOnLeaveId).val();

            
            //  Skip if we haven't obtained the start and end dates for the leave
            if  (firstWorkingDateText.length === 0 || lastWorkingDateText.length === 0) {
                return;
            }

            var second=1000, minute=second*60, hour=minute*60, day=hour*24, week=day*7;
            
            var firstWorkingDate    = Date.parse(firstWorkingDateText);
            var lastWorkingDate     = Date.parse(lastWorkingDateText);

            var firstDayIndex    = firstWorkingDate.getDay();
            var lastDayIndex     = lastWorkingDate.getDay();

            
            
            //  Inspect the roster days provided for hours
            var rosterMap = {"0":"RD_On_Sun",
                             "1":"RD_On_Mon",
                             "2":"RD_On_Tues",
                             "3":"RD_On_Wed",
                             "4":"RD_On_Thurs",
                             "5":"RD_On_Fri",
                             "6":"RD_On_Sat"
                            };

            var rosterMapKeys  = Object.keys(rosterMap);
            var rosterWorkDays = new Object();
            
            //  For any possible roster day save the hours.
            for (var rosterMapKey in rosterMapKeys) {
               var  hoursOfWork = $('#' + rosterMap[rosterMapKey]).val();
               
               if    (hoursOfWork > 0) {
                  rosterWorkDays[rosterMapKey] = hoursOfWork;
               }
            }
            
            
            var rosterWorkDayKeys            = Object.keys(rosterWorkDays);
            var numberOfRosterWorkDaysLength = rosterWorkDayKeys.length;
            
            
            
            
            
            var changeInDates = false;
            
            
            //    If any days have been recorded in the roster days then ensure dates are working days
            if    (numberOfRosterWorkDaysLength > 0) {
  
                //   If the first date provided was not a roster day then move to the first roster day.
                if   (rosterWorkDays[firstDayIndex] == null) {
              
                   // Get the next rostered work day
                   var firstWorkingDayIndex     = rosterWorkDayKeys[getNextRosterDayIndex(rosterWorkDays, firstDayIndex)];
                     var firstWorkingBusinessDate = firstWorkingDate;
              
                     //  Go to the next date with a day index of firstWorkingDayIndex. 
                     firstWorkingBusinessDate.moveToDayOfWeek(firstWorkingDayIndex);
                
                     var firstWorkingBusinessDateText = firstWorkingBusinessDate.toString("d-M-yyyy");
              
                     //  Inform the user of the movement in the date
                     alert(sprintf("First leave date: [%s] must be a rostered working day resetting to: [%s]", 
                               firstWorkingDateText, 
                               firstWorkingBusinessDateText));

                     //  Reset the value and focus on the date.
                     $(firstWorkDateId).val(firstWorkingBusinessDateText);
                     $(firstWorkDateId).focus();  
                  
                     changeInDates = true;
                }
                
               
                //   If the last day isn't a roster day then move back to the last roster day.
                  if   (rosterWorkDays[lastDayIndex] == null) {
                      
                      // Get the previous rostered work day
                      var lastWorkingDayIndex      = rosterWorkDayKeys[getPreviousRosterDayIndex(rosterWorkDays, lastDayIndex)];
                      var lastWorkingBusinessDate  = lastWorkingDate;
               
                      //    Go back to the previous lastWorkingDayIndex
                      lastWorkingBusinessDate.moveToDayOfWeek(lastWorkingDayIndex, -1);
                 
                      var lastWorkingBusinessDateText = lastWorkingBusinessDate.toString("d-M-yyyy");
               
                      //  Inform the user of the movement in the date
                      alert(sprintf("Last leave date: [%s] must be a rostered working day resetting to: [%s]", 
                                    lastWorkingDateText, 
                                    lastWorkingBusinessDateText));
                      
                      //  Reset the value and focus on the date.
                      $(lastWorkDateId).val(lastWorkingBusinessDateText);
                      $(lastWorkDateId).focus();  
                 
                      changeInDates = true;
                 }
            }
            else
            {
                //    Ensure dates are working days
                if    (firstDayIndex < 1 || firstDayIndex > 5) {
                  
                      var firstWorkingBusinessDate = firstWorkingDate;
             
                      //  Go to the next date with a day index of Monday. 
                      firstWorkingBusinessDate.moveToDayOfWeek(1);
               
                      var firstWorkingBusinessDateText = firstWorkingBusinessDate.toString("d-M-yyyy");
             
                      //  Inform the user of the movement in the date
                      alert(sprintf("First leave date: [%s] must be a working day resetting to: [%s]", 
                                  firstWorkingDateText, 
                                  firstWorkingBusinessDateText));

                      //  Reset the value and focus on the date.
                      $(firstWorkDateId).val(firstWorkingBusinessDateText);
                      $(firstWorkDateId).focus();
                      
                      changeInDates = true;
                }
                
                if    (lastDayIndex < 1  || lastDayIndex > 5) {
  
                    var lastWorkingBusinessDate  = lastWorkingDate;
             
                      //    Go back to the previous Friday
                      lastWorkingBusinessDate.moveToDayOfWeek(5, -1);
               
                      var lastWorkingBusinessDateText = lastWorkingBusinessDate.toString("d-M-yyyy");
             
                      //  Inform the user of the movement in the date
                      alert(sprintf("Last leave date: [%s] must be a working day resetting to: [%s]", 
                                    lastWorkingDateText, 
                                    lastWorkingBusinessDateText));
                    
                      //  Reset the value and focus on the date.
                      $(lastWorkDateId).val(lastWorkingBusinessDateText);
                      $(lastWorkDateId).focus();

                      changeInDates = true;
                }
                              
            }
            


            //  Reobtain the working dates in casethey have changed.
            firstWorkingDateText = $(firstWorkDateId).val();
            lastWorkingDateText  = $(lastWorkDateId).val();

            firstWorkingDate = Date.parse(firstWorkingDateText);
            lastWorkingDate  = Date.parse(lastWorkingDateText);
            
            firstDayIndex    = firstWorkingDate.getDay();
            lastDayIndex     = lastWorkingDate.getDay();


            
            //    Ensure first is not after last date
            if    (firstWorkingDate.compareTo(lastWorkingDate) == 1) 
            {
                  alert(sprintf("First leave date: [%s] should not be after last leave date: [%s]", 
                                firstWorkingDateText, 
                                lastWorkingDateText));

                  //    Blank out any previous values for work days and return date
                  $(workDaysOnLeaveId).val("");
                  $(returnWorkDateId).val("");
                  
                  $(firstWorkDateId).focus();
                  return false;
            }


            var numberOfWorkDays;
            var dayDifference;

            
            //    If any days have been recorded in the roster days then this represent the number of work days otherwise default to 5 for a mon-fri work week
            if  (numberOfRosterWorkDaysLength > 0) 
            {
              numberOfWorkDays     = numberOfRosterWorkDaysLength;

                firstDayRosterIndex = getRosterDayIndex(rosterWorkDays, firstDayIndex);
                lastDayRosterIndex  = getRosterDayIndex(rosterWorkDays, lastDayIndex);
                
                //  Each day has been allocated a number. If the the last day is less than the first day number this means that the week has changed. 
                //  
                //  Each day number is converted to a roster day index so as to remove the affect of the non working days.
                dayDifference        = lastDayRosterIndex < firstDayRosterIndex ? (numberOfWorkDays + lastDayRosterIndex) - firstDayRosterIndex : lastDayRosterIndex - firstDayRosterIndex;
            }
            else 
            {
              numberOfWorkDays = 5;

                //  Each day number is converted to a roster day index so as to remove the affect of the non working days.
                dayDifference        = lastDayIndex < firstDayIndex ? (numberOfWorkDays + lastDayIndex) - firstDayIndex : lastDayIndex - firstDayIndex;
            }
              
            
            var differenceInDates = lastWorkingDate - firstWorkingDate;
            
            // Divide the difference between start and end dates in full weeks. Times weeks by business days and add the dayDifference
            var workDays          = (Math.floor(differenceInDates / week) * numberOfWorkDays) + dayDifference + 1;
           

            
            if  (bDateChange == true)
            {
                //  Update the work days
                $(workDaysOnLeaveId).val(workDays);
            }
            else
            {
              // This check happens at the end 
                var currentWorkDays = $(workDaysOnLeaveId).val();
                
                if  (   currentWorkDays.length > 0 
                     && currentWorkDays > workDays)
                {
                    alert(sprintf("Number of work days %s exceeds the calculated possible number of work days %s.\n\n" +
                              "Given the number of %s days is currently at %s, either correct the value or adjust the rostered days using the roster.", 
                              currentWorkDays, 
                              workDays,
                              (numberOfRosterWorkDaysLength > 0) ? "rostered" : "work",
                              numberOfWorkDays));

                    $(firstWorkDateId).focus();
                    return false;
                }
                else
                {
                    //  Update the work days
                    $(workDaysOnLeaveId).val(workDays);
                }
            }

             
            //  Adjust the return to work date
            var nextWorkingDay;

            if  (numberOfRosterWorkDaysLength > 0) 
            {
                var nextRosteredIndex = getNextRosterDayIndex(rosterWorkDays, lastDayIndex);
                nextWorkingDay = lastWorkingDate.moveToDayOfWeek(rosterWorkDayKeys[nextRosteredIndex], 1); // move to next roster day
            }
            else
            {
                if    (lastWorkingDate.is().friday()) 
                {
                      nextWorkingDay = lastWorkingDate.moveToDayOfWeek(1, 1); // move to next Monday
                }
                else
                {
                     nextWorkingDay = lastWorkingDate.add(1).days();  
                }
            }
            
            var nextWorkingDayText = nextWorkingDay.toString("d-M-yyyy");
            
            
            
            if  (bDateChange == true)
            {
                $(returnWorkDateId).val(nextWorkingDayText);
                $(returnWorkDateId).focus();  
            }
            else
            {
                var nextWorkingDayInputText   = $(returnWorkDateId).val();
                var nextWorkingDayInputDate   = Date.parse(nextWorkingDayInputText);
                
                if  (nextWorkingDayInputDate.compareTo(nextWorkingDay) < 0)
                {
                    alert(sprintf("Returning work date: [%s] cannot be prior to the first available return %s date of: [%s].",
                              nextWorkingDayInputText, 
                                  (numberOfRosterWorkDaysLength > 0) ? "rostered" : "work",
                                  nextWorkingDayText));

                    $(returnWorkDateId).focus();
                    return false;
                }
                
                
                var nextWorkingDayInputIndex = nextWorkingDayInputDate.getDay();
                var firstWorkingBusinessDate = nextWorkingDayInputDate;
                
                //  If we have roster days then ensure that the return day is on of these
                if    (numberOfRosterWorkDaysLength > 0) 
                {
                    if  (getRosterDayIndex(rosterWorkDays, nextWorkingDayInputIndex) == null)
                    {
                      var firstAvailableReturnDayIndex  = rosterWorkDayKeys[getNextRosterDayIndex(rosterWorkDays, nextWorkingDayInputIndex)]; 
                        
                        //  Go to the next date with a day index of firstWorkingDayIndex. 
                        firstWorkingBusinessDate.moveToDayOfWeek(firstAvailableReturnDayIndex);
                      
                        var firstWorkingBusinessDateText = firstWorkingBusinessDate.toString("d-M-yyyy");
                      
                        alert(sprintf("Returning work date: [%s] must be a rostered day. Resetting to the first available return roster date of: [%s].",
                                  nextWorkingDayInputText, 
                                  firstWorkingBusinessDateText));
    
                            $(returnWorkDateId).val(firstWorkingBusinessDateText);
                            $(returnWorkDateId).focus();
                            
                        return false;
                    }
                }                
                else
                {
                    //    Ensure dates are working days
                    if    (nextWorkingDayInputIndex < 1 || nextWorkingDayInputIndex > 5) {
                        
                          //  Go to the next date with a day index of Monday. 
                          firstWorkingBusinessDate.moveToDayOfWeek(1);
                   
                          var firstWorkingBusinessDateText = firstWorkingBusinessDate.toString("d-M-yyyy");
                 
                          alert(sprintf("Returning work date: [%s] must be a work day. Resetting to the first available return work date of: [%s].",
                                        nextWorkingDayInputText, 
                                        firstWorkingBusinessDateText));

                          $(returnWorkDateId).val(firstWorkingBusinessDateText);
                          $(returnWorkDateId).focus();
                    
                         return false;
                    }             
                }
            }
            
              
              

            //  Allow both dates to be altered
            if  (changeInDates == true)
            {
                return false;
            }


            return true;
        }
        
        
        
        
        
        function getNextRosterDayIndex(rosterWorkDays, dayIndex) {
          
          var rosterWorkDayKeys = Object.keys(rosterWorkDays);
          
            for (var rosterKeyIndex =0; rosterKeyIndex < rosterWorkDayKeys.length; rosterKeyIndex++) {
                if    (rosterWorkDayKeys[rosterKeyIndex] > dayIndex) {
                      return rosterKeyIndex;
                }
            }
  
            return 0;
        }
        
        

        
        function getPreviousRosterDayIndex(rosterWorkDays, dayIndex) {
            
            var rosterWorkDayKeys = Object.keys(rosterWorkDays);
            
            for (var rosterKeyIndex = rosterWorkDayKeys.length - 1; rosterKeyIndex >= 0; rosterKeyIndex--) {
                if    (rosterWorkDayKeys[rosterKeyIndex] < dayIndex) {
                      return rosterKeyIndex;
                }
            }
    
            return rosterWorkDayKeys.length - 1;
        }
            
        
        
        
       function getRosterDayIndex(rosterWorkDays, dayIndex) {
            
            var rosterWorkDayKeys = Object.keys(rosterWorkDays);
            
            for (var rosterKeyIndex =0; rosterKeyIndex < rosterWorkDayKeys.length; rosterKeyIndex++) {
                if    (rosterWorkDayKeys[rosterKeyIndex] == dayIndex) {
                      return rosterKeyIndex;
                }
            }
    
            return null;
        }
        
        
       
       
       

       function checkForNoCompleteLeaveRow(rowId)
       {
         var lineIds = ["LD_TOL_Grp", 
                        "LD_First_Working_DOL",
                        "LD_Last_Working_DOL",
                        "LD_Total_Number_WH",
                        "LD_Date_RTW"
                        ];
         
         var bLocatedAValue = false;
         
         for (var columnIndex = 0; columnIndex < lineIds.length; columnIndex++)
         {
           
           var columnText = $('#' + lineIds[columnIndex] + rowId).val();
           
           if (columnText.length > 0)
           {
             bLocatedAValue = true;
           }
         }

         
         if  (bLocatedAValue)
         {
           // We know we have a value now lets ensure that all the entries have been provided.
           
           for (var columnIndex = 0; columnIndex < lineIds.length; columnIndex++)
           {
              var columnId   = '#' + lineIds[columnIndex] + rowId
              var columnText = $(columnId).val();
              
                  if   (columnText.length == 0)
                  {
                       alert(sprintf("Incomplete leave row. Either complete input or remove values."));

                       $(columnId).focus(); 
                       return false;
                  }
           }
           }
         
         return true;
       }
         
         
         
         
       
        $(document).on("click", ".createReqBtn", function (){

          var emp_id = $('#Employee_ID_Number').val();

          if(emp_id.length < 6){
            alert('Employee ID should be 6 Digits!');
            $('#Employee_ID_Number').focus();
            return false;
          }

          
          // Check row is complete if so run column checks
          for   (var rowId = 1; rowId <= 4; rowId++)
          {
            var rowStatus = checkForNoCompleteLeaveRow(rowId);
            
            if   (rowStatus == true)
              {
               // Check the row - False meaning no change of input
               rowStatus = processLeaveLine(false, rowId);
            }
            
            if   (rowStatus == false)
            {
              return false
            }
        }
        });
        
    </script>

    <style>
        .table-striped thead th, .table-striped tbody td { text-align: center; vertical-align: middle; }
        .table-striped thead th { background: #516A83; color: #fff;}
        .float-left { width: 47%; float: left; display: inline-block;}
        .centered-input-text table tr td input { text-align: left; }
        .centered-input-text table tr td .spnr { border: none !important; box-shadow: none !important; }
        .ui-spinner a.ui-spinner-up { top: 0px !important; }
        .ui-spinner a.ui-spinner-down { top: 15px !important; }
        .ui-spinner a.ui-spinner-button { border-left: 1px solid #d3d3d3; }
        .ui-spinner {
            -webkit-box-shadow: inset 0 0px 1px rgba(0, 0, 0, 0.050);
                -moz-box-shadow: inset 0 0px 1px rgba(0, 0, 0, 0.050);
                box-shadow: 0px 0px 1px rgba(50, 50, 50, 0.50);
                border-color: #A3A1A1;
        }

        @media (max-width: 1400px) {
          .fl-l { clear: both; float: left; width: 100%; }
          .date_pickr { width: 80px !important; }
          .numbersOnly { width: 30px !important; }
          #Employee_ID_Number { width: auto !important; }
        }
    </style>



{% endblock %}

{% block layout_page_title %}
<!-- page title here -->
Leave Request Form
{% endblock %}

{% block layout_page_buttons %}
<!-- page specific buttons here, buttons specify here will be added in the btn group -->
{% endblock %}

{% block layout_content %}
        <div class="form-description fd-form-view" id="form-description">
            <p><i class="icon-pencil"></i>Allows Users to get manager approval for leave and forms automatically sent to payroll.</p>   
        </div>

        <form class="form form-horizontal well" action="/leaveapps/add" method="post">
        <fieldset>

        <!-- Form Name -->
        <div class="leave-form-section">
            <legend>Approver Details</legend>
            <!-- Text input-->
            <div class="control-group">
              <label class="control-label" for="Line_Manager">Line Manager</label>
              <div class="controls">
                <input id="Line_Manager" name="Line_Manager" type="text" class="span5 global-address" leave-app-lm='true' single-select='true' required="">
              </div>
            </div>

            <!-- Text input-->
            <div class="control-group">
              <label class="control-label" for="HR_Managers">HR Manager</label>
              <div class="controls">
                <input id="HR_Managers" name="HR_Managers" type="text" class="span5 global-address" leave-app-hr='true' single-select='true'>
              </div>
              <span>
            </div>

            <!-- Text input-->
            <div class="control-group">
              <label class="control-label" for="Payroll_Office">Payroll Office</label>
              <div class="controls">
                <select id="Payroll_Office" name="Payroll_Office" class="selectpicker span5" required>
                  <option value="">Please Select</option>
                  <!-- <option value='formapprover2@woolworths.com.au'>FOR QA TESTING - FORM APPROVER 2</option> -->
                  <option value='hmurphy@woolworths.com.au:EXEC - HELEN MURPHY'>EXEC - HELEN MURPHY</option>
                  <option value='crotter@woolworths.com.au:WA - SMKTS - NAOMI FLAXMAN'>WA - SMKTS - NAOMI FLAXMAN</option>
                  <option value='amartin2@woolworths.com.au:SA/NT - SMKTS - ANNETTE MARTIN'>SA/NT - SMKTS - ANNETTE MARTIN</option>
                  <option value='bhart2@woolworths.com.au:VIC/TAS - SMKTS - BEN HART'>VIC/TAS - SMKTS - BEN HART</option>
                  <option value='stevi@woolworths.com.au:NSW/ACT - SMKTS - SANDRA TEVI'>NSW/ACT - SMKTS - SANDRA TEVI</option>
                  <option value='klutzke@woolworths.com.au:QLD - SMKTS - KYLIE LUTZKE'>QLD - SMKTS - KYLIE LUTZKE</option>
                  <option value='lwalmsley@woolworths.com.au:12 - BIG W - SUPPORT (STORE OPS-MARK-FIN-LOG) - LAUREN WALMSLEY'>12 - BIG W - SUPPORT (STORE OPS-MARK-FIN-LOG) - LAUREN WALMSLEY</option>
                  <option value='lwalmsley@woolworths.com.au:12 - NORTH EASTERN - LAUREN WALMSLEY'>12 - NORTH EASTERN - LAUREN WALMSLEY</option>
                  <option value='lwalmsley@woolworths.com.au:12 - SOUTH EASTERN - LAUREN WALMSLEY'>12 - SOUTH EASTERN - LAUREN WALMSLEY</option>
                  <option value='lwalmsley@woolworths.com.au:12 - CENTRAL EASTERN - LAUREN WALMSLEY'>12 - CENTRAL EASTERN - LAUREN WALMSLEY</option>
                  <option value='lwalmsley@woolworths.com.au:12 - SOUTH WESTERN - LAUREN WALMSLEY'>12 - SOUTH WESTERN - LAUREN WALMSLEY</option>
                  <option value='smennell@woolworths.com.au:13 - NATIONAL - SASHA MENNELL'>13 - NATIONAL - SASHA MENNELL</option>
                  <option value='cjamesion@woolworths.com.au:14 - BUYING and MARKETING - CHRIS JAMESION'>14 - BUYING and MARKETING - CHRIS JAMESION</option>
                  <option value='plucas@woolworths.com.au:15 - LOGISTICS - PAM LUCAS'>15 - LOGISTICS - PAM LUCAS</option>
                  <option value='plucas@woolworths.com.au:16 - LOGISTICS - PAM LUCAS'>16 - LOGISTICS - PAM LUCAS</option>
                  <option value='cmckay2@woolworths.com.au:17 - LIQUOR - CATHY MCKAY'>17 - LIQUOR - CATHY MCKAY</option>
                  <option value='cmckay2@woolworths.com.au:18 - LIQUOR BWS - CATHY MCKAY'>18 - LIQUOR BWS - CATHY MCKAY</option>
                  <option value='cmckay2@woolworths.com.au:18 - LIQUOR DAN MURPHY - CATHY MCKAY'>18 - LIQUOR DAN MURPHY - CATHY MCKAY</option>
                  <option value='mducat@woolworths.com.au:22 - SMALL FORMAT - MELISSA DUCAT'>22 - SMALL FORMAT - MELISSA DUCAT</option>
                  <option value='mducat@woolworths.com.au:23 - THOMAS DUX - MELISSA DUCAT'>23 - THOMAS DUX - MELISSA DUCAT</option>
                  <option value='cjamesion@woolworths.com.au:24 - WOW MEAT COMPANY - CHRIS JAMESION'>24 - WOW MEAT COMPANY - CHRIS JAMESION</option>
                  <option value='klutzke@woolworths.com.au:28 - PETROL - KYLIE LUTZKE  ( SAM CROFT FROM 02.12.13)'>28 - PETROL - KYLIE LUTZKE  ( SAM CROFT FROM 02.12.13)</option>
                  <option value='klutzke@woolworths.com.au:29 - PETROL - KYLIE LUTZKE  ( SAM CROFT FROM 02.12.13)'>29 - PETROL - KYLIE LUTZKE  ( SAM CROFT FROM 02.12.13)</option>
                  <option value='jmurphy2@woolworths.com.au:33 - HOME IMPROVEMENT - JESKA MURPHY'>33 - HOME IMPROVEMENT - JESKA MURPHY</option>
                  <option value='jmurphy2@woolworths.com.au:34 - DANKS RETAIL - JESKA MURPHY'>34 - DANKS RETAIL - JESKA MURPHY</option>
                  <option value='jmurphy2@woolworths.com.au:35 - DANKS WHOLESALE - JESKA MURPHY'>35 - DANKS WHOLESALE - JESKA MURPHY</option>
                  <option value='jmurphy2@woolworths.com.au:36 - HARDINGS - JESKA MURPHY'>36 - HARDINGS - JESKA MURPHY</option>
                  <option value='lhines@woolworths.com.au:51 - CORPORATE PROPERTY - LINDY HINES'>51 - CORPORATE PROPERTY - LINDY HINES</option>
                  <option value='cmckay2@woolworths.com.au:64 - PINNACLE - CATHY MCKAY'>64 - PINNACLE - CATHY MCKAY</option>
                  <option value='cmckay2@woolworths.com.au:65 - THE WINE QUARTER - CATHY MCKAY'>65 - THE WINE QUARTER - CATHY MCKAY</option>
                  <option value='plucas@woolworths.com.au:95 - MULTI CHANNEL - PAM LUCAS'>95 - MULTI CHANNEL - PAM LUCAS</option>
                  <option value='lhines@woolworths.com.au:96 - BTS - LINDY HINES'>96 - BTS - LINDY HINES</option>
                  <option value='bhart2@woolworths.com.au:97 - VIC CREDIT UNION - BEN HART'>97 - VIC CREDIT UNION - BEN HART</option>
                  <option value='cjamesion@woolworths.com.au:98 - WOWCARE - CHRIS JAMESION'>98 - WOWCARE - CHRIS JAMESION</option>
                  <option value='lhines@woolworths.com.au:99 - CORPORATE - LINDY HINES'>99 - CORPORATE - LINDY HINES</option>
                  <option value='rbailey@woolworths.com.au:99 - TPC (Weekly Pay) - ROB BAILEY'>99 - TPC (Weekly Pay) - ROB BAILEY</option>
                  <option value='lhines@woolworths.com.au:99 - TPC (Fortnightly Pay) - LINDY HINES'>99 - TPC (Fortnightly Pay) - LINDY HINES</option>
                </select>
              </div>
              <span>
            </div>
 
        <div class="leave-form-section">
            <legend>Employee Details</legend>
            <!-- Text input-->
            <div class="control-group">
              <label class="control-label" for="Location_Name">Location Name</label>
              <div class="controls">
                <input id="Location_Name" name="Location_Name" type="text" placeholder="Enter Location Name" required class="span5" value="{{location}}"> 
                <!-- <a href="#" class="btn btn-small"><i class="icon-black icon-edit"></i></a> -->
                <!-- <a href="#" class="btn btn-success"><i class="icon-white icon-check"></i></a> -->
              </div>
            </div>

            <!-- Text input-->
            <div class="control-group">
              <label class="control-label" for="Region_Division">Region/Division</label>
              <div class="controls">
                <input id="Region_Division" name="Region_Division" type="text" class="span5" placeholder="Enter Region/Division" value="{{division}}" required>
                <!-- <a href="#" class="btn btn-small"><i class="icon-black icon-edit"></i></a> -->
                <!-- <a href="#" class="btn btn-success"><i class="icon-white icon-check"></i></a> -->
              </div>
            </div>

 
            <!-- Text input-->
            <div class="control-group">
              <label class="control-label" for="Employee_ID_Number">Employee ID Number</label>
              <div class="controls">
                <input id="Employee_ID_Number" 
                       name="Employee_ID_Number" 
                       type="text" 
                       placeholder="Enter your 6 digit Employee ID Number" 
                       class="span5 numbersOnly" 
                       maxlength='6' 
                       value="{{employeeId}}"
                       required>
                
              </div>
            </div>


            <!-- Text input-->
            <div class="control-group">
              <label class="control-label" for="Position">Position</label>
              <div class="controls">
                <input id="Position" name="Position" type="text" placeholder="Enter Position" class="span5" required value="{{position}}">
                <!-- <a href="#" class="btn btn-small"><i class="icon-black icon-edit"></i></a> -->
                <!-- <a href="#" class="btn btn-success"><i class="icon-white icon-check"></i></a> -->
              </div>
            </div>



            <!-- Text input-->
            <div class="control-group">
              <label class="control-label" for="Location_Cost_Center">Location No. or Cost Centre</label>
              <div class="controls">
                <input id="Location_Cost_Center" name="Location_Cost_Center" type="text" placeholder="Enter Location No. or Cost Centre" class="span5" required value="{{costCentre}}">
              </div>
            </div>




            <!-- Select Basic -->
            <div class="control-group">
              <label class="control-label" for="Employee_Type">Employee Type</label>
              <div class="controls">
                <select id="Employee_Type" name="Employee_Type" class="span2 selectpicker" required>
                  <option>Full Time</option>
                  <option>Part Time</option>
                  <option>Casual</option>
                </select>
              </div>
            </div>

            <!-- Select Basic -->
            <div class="control-group">
              <label class="control-label" for="Pay_Frequency">Pay Frequency</label>
              <div class="controls">
                <select id="Pay_Frequency" name="Pay_Frequency" class="span2 selectpicker" required>
                  <option>Weekly</option>
                  <option>Fortnightly</option>
                  <option>Monthly</option>
                </select>
              </div>
            </div>
        </div>

        <div class="row-fluid span6 centered-input-text">
        <table class="table table-bordered table-striped tbl">
                <thead>
                    <th>&nbsp;</th> <th>MON</th> <th>TUE</th> <th>WED</th> <th>THURS</th> <th>FRI</th> <th>SAT</th> <th>SUN</th> <th>TOTAL</th>
                </thead>

                <tbody>
                    <tr>
                        <td>Hours on Week</td>
                        <td><input id="RD_On_Mon" name="RD_On_Mon" type="text" class="spnr span9 hoursonweek numbersOnly" placeholder="0"/></td>
                        <td><input id="RD_On_Tues" name="RD_On_Tues" type="text" class="spnr span10 hoursonweek numbersOnly" placeholder="0"></td>
                        <td><input id="RD_On_Wed" name="RD_On_Wed" type="text" class="spnr span10 hoursonweek numbersOnly" placeholder="0"></td>
                        <td><input id="RD_On_Thurs" name="RD_On_Thurs" type="text" class="spnr span10 hoursonweek numbersOnly" placeholder="0"></td>
                        <td><input id="RD_On_Fri" name="RD_On_Fri" type="text" class="spnr span10 hoursonweek numbersOnly" placeholder="0"></td>
                        <td><input id="RD_On_Sat" name="RD_On_Sat" type="text" class="spnr span10 hoursonweek numbersOnly" placeholder="0"></td>
                        <td><input id="RD_On_Sun" name="RD_On_Sun" type="text" class="spnr span10 hoursonweek numbersOnly" placeholder="0"></td>
                        <td><input id="RD_On_Total" name="RD_On_Total" type="text" class="span10" readonly value="0"></td>
                    </tr>
                    <tr>
                        <td>Hours off Week <br/><sup>(where applicable)</sup></td>
                        <td><input id="RD_Off_Mon" name="RD_Off_Mon" type="text" class="spnr span10 hoursoffweek numbersOnly" placeholder="0"></td>
                        <td><input id="RD_Off_Tues" name="RD_Off_Tues" type="text" class="spnr span10 hoursoffweek numbersOnly" placeholder="0"></td>
                        <td><input id="RD_Off_Wed" name="RD_Off_Wed" type="text" class="spnr span10 hoursoffweek numbersOnly" placeholder="0"></td>
                        <td><input id="RD_Off_Thurs" name="RD_Off_Thurs" type="text" class="spnr span10 hoursoffweek numbersOnly" placeholder="0"></td>
                        <td><input id="RD_Off_Fri" name="RD_Off_Fri" type="text" class="spnr span10 hoursoffweek numbersOnly" placeholder="0"></td>
                        <td><input id="RD_Off_Sat" name="RD_Off_Sat" type="text" class="spnr span10 hoursoffweek numbersOnly" placeholder="0"></td>
                        <td><input id="RD_Off_Sun" name="RD_Off_Sun" type="text" class="spnr span10 hoursoffweek numbersOnly" placeholder="0"></td>
                        <td><input id="RD_Off_Total" name="RD_Off_Total" type="text" class="span10" readonly value="0"></td>
                </tbody>
            </table>
        </div>

        <div class="leave-form-section">
            <legend>Leave Details</legend>
            <!-- Select Basic -->
            
            <div class="leave-form-section">
            <table class="table table-striped table-bordered">
                <thead style="text-align: center;">
                    <th><br/>Type of Leave</th>
                    <th>First Working<br/>Date of Leave</th>
                    <th>Last Working<br/>Date of Leave</th>
                    <th>Total No. of<br/>Working Days</th>
                    <th>Date Returning<br/>to Work</th>
                </thead>

                <tbody>
                    <tr>
                        <td>
                            <select id="LD_TOL_Grp1" name="LD_TOL_Grp1" class="selectpicker span10" required>
                              <option value="">Please Select</option>
                              <option value='Annual Leave'>Annual Leave</option>
                              <option value='Long Service Leave'>Long Service Leave</option>
                              <option value='Aust Defence Force Leave'>Aust Defence Force Leave</option>
                              <option value='Jury Duty'>Jury Duty</option>
                              <option value='SES Leave'>SES Leave</option>
                              <option value='Time In Lieu (PEL Employees only)'>Time In Lieu (PEL Employees only)</option>
                              <option value='Alternative Holiday (PEL Employees Only)'>Alternative Holiday (PEL Employees Only)</option>
                              <option value='Sick Leave (BIG W, Monarto DC and PEL)'>Sick Leave (BIG W, Monarto DC and PEL)</option>
                              <option value='Study Leave'>Study Leave</option>
                              <option value='Long Service Leave at Half Pay'>Long Service Leave at Half Pay</option>
                            </select>
                        </td>

                        <td>
                            <div class="input-append">
                                <input class="span6 date_pickr" 
                                       type="text" 
                                       onChange="processLeaveLine(true, 1);"  
                                       id="LD_First_Working_DOL1" 
                                       name="LD_First_Working_DOL1" 
                                       required placeholder="Select Date" >
  
                             </div>
                        </td>
                        <td>
                            <div class="input-append">
                                <input class="span6 date_pickr" 
                                       type="text" 
                                       onChange="processLeaveLine(true, 1);"
                                       id="LD_Last_Working_DOL1" 
                                       name="LD_Last_Working_DOL1" 
                                       required placeholder="Select Date" >
                                       
                                <!-- <span class="add-on"><i class="icon-calendar"></i></span> -->
                            </div>
                        </td>
                        <td>
                            <input class="span4 numbersOnly" type="text" id="LD_Total_Number_WH1" name="LD_Total_Number_WH1" required>
                        </td>
                        <td>
                            <div class="input-append">
                                <input class="span6 date_pickr" type="text" id="LD_Date_RTW1" name="LD_Date_RTW1" required placeholder="Select Date" >
                                <!-- <span class="add-on"><i class="icon-calendar"></i></span> -->
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <select id="LD_TOL_Grp2" name="LD_TOL_Grp2" class="selectpicker span10">
                              <option value="">Please Select</option>
                              <option value='Annual Leave'>Annual Leave</option>
                              <option value='Long Service Leave'>Long Service Leave</option>
                              <option value='Aust Defence Force Leave'>Aust Defence Force Leave</option>
                              <option value='Jury Duty'>Jury Duty</option>
                              <option value='SES Leave'>SES Leave</option>
                              <option value='Time In Lieu (PEL Employees only)'>Time In Lieu (PEL Employees only)</option>
                              <option value='Alternative Holiday (PEL Employees Only)'>Alternative Holiday (PEL Employees Only)</option>
                              <option value='Sick Leave (BIG W, Monarto DC and PEL)'>Sick Leave (BIG W, Monarto DC and PEL)</option>
                              <option value='Study Leave'>Study Leave</option>
                              <option value='Long Service Leave at Half Pay'>Long Service Leave at Half Pay</option>
                            </select>
                        </td>
                        <td>
                            <div class="input-append">
                                <input class="span6 date_pickr" type="text" 
                                       onChange="processLeaveLine(true, 2);"
                                       id="LD_First_Working_DOL2" name="LD_First_Working_DOL2" placeholder="Select Date" >
                                <!-- <span class="add-on"><i class="icon-calendar"></i></span> -->
                            </div>
                        </td>
                        <td>
                            <div class="input-append">
                                <input class="span6 date_pickr" type="text" 
                                       onChange="processLeaveLine(true, 2);"
                                       id="LD_Last_Working_DOL2" name="LD_Last_Working_DOL2" placeholder="Select Date" >
                                <!-- <span class="add-on"><i class="icon-calendar"></i></span> -->
                            </div>
                        </td>
                        <td>
                            <input class="span4 numbersOnly" type="text" id="LD_Total_Number_WH2" name="LD_Total_Number_WH2" >
                        </td>
                        <td>
                            <div class="input-append">
                                <input class="span6 date_pickr" type="text" id="LD_Date_RTW2" name="LD_Date_RTW2"  placeholder="Select Date" >
                                <!-- <span class="add-on"><i class="icon-calendar"></i></span> -->
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <select id="LD_TOL_Grp3" name="LD_TOL_Grp3" class="selectpicker span10">
                              <option value="">Please Select</option>
                              <option value='Annual Leave'>Annual Leave</option>
                              <option value='Long Service Leave'>Long Service Leave</option>
                              <option value='Aust Defence Force Leave'>Aust Defence Force Leave</option>
                              <option value='Jury Duty'>Jury Duty</option>
                              <option value='SES Leave'>SES Leave</option>
                              <option value='Time In Lieu (PEL Employees only)'>Time In Lieu (PEL Employees only)</option>
                              <option value='Alternative Holiday (PEL Employees Only)'>Alternative Holiday (PEL Employees Only)</option>
                              <option value='Sick Leave (BIG W, Monarto DC and PEL)'>Sick Leave (BIG W, Monarto DC and PEL)</option>
                              <option value='Study Leave'>Study Leave</option>
                              <option value='Long Service Leave at Half Pay'>Long Service Leave at Half Pay</option>
                            </select>
                        </td>
                        <td>
                            <div class="input-append">
                                <input class="span6 date_pickr" type="text" 
                                       onChange="processLeaveLine(true, 3);"
                                       id="LD_First_Working_DOL3" name="LD_First_Working_DOL3" placeholder="Select Date" >
                                <!-- <span class="add-on"><i class="icon-calendar"></i></span> -->
                            </div>
                        </td>
                        <td>
                            <div class="input-append">
                                <input class="span6 date_pickr" type="text" 
                                       onChange="processLeaveLine(true, 3);"
                                       id="LD_Last_Working_DOL3" name="LD_Last_Working_DOL3" placeholder="Select Date" >
                                <!-- <span class="add-on"><i class="icon-calendar"></i></span> -->
                            </div>       
                        </td>
                        <td>
                            <input class="span4 numbersOnly" type="text" id="LD_Total_Number_WH3" name="LD_Total_Number_WH3" >
                        </td>
                        <td>
                            <div class="input-append">
                                <input class="span6 date_pickr" type="text" id="LD_Date_RTW3" name="LD_Date_RTW3"  placeholder="Select Date" >
                                <!-- <span class="add-on"><i class="icon-calendar"></i></span> -->
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <select id="LD_TOL_Grp4" name="LD_TOL_Grp4" class="selectpicker span10">
                              <option value="">Please Select</option>
                              <option value='Annual Leave'>Annual Leave</option>
                              <option value='Long Service Leave'>Long Service Leave</option>
                              <option value='Annual'>Aust Defence Force Leave</option>
                              <option value='Jury Duty'>Jury Duty</option>
                              <option value='SES Leave'>SES Leave</option>
                              <option value='Time In Lieu (PEL Employees only)'>Time In Lieu (PEL Employees only)</option>
                              <option value='Alternative Holiday (PEL Employees Only)'>Alternative Holiday (PEL Employees Only)</option>
                              <option value='Sick Leave (BIG W, Monarto DC and PEL)'>Sick Leave (BIG W, Monarto DC and PEL)</option>
                              <option value='Study Leave'>Study Leave</option>
                              <option value='Long Service Leave at Half Pay'>Long Service Leave at Half Pay</option>
                            </select>
                        </td>
                        <td>
                            <div class="input-append">
                                <input class="span6 date_pickr" type="text" 
                                       onChange="processLeaveLine(true, 4);"
                                       id="LD_First_Working_DOL4" name="LD_First_Working_DOL4" placeholder="Select Date" >
                                <!-- <span class="add-on"><i class="icon-calendar"></i></span> -->
                            </div>   
                        </td>
                        <td>
                            <div class="input-append">
                                <input class="span6 date_pickr" type="text" 
                                       onChange="processLeaveLine(true, 4);"
                                       id="LD_Last_Working_DOL4" name="LD_Last_Working_DOL4" placeholder="Select Date" >
                                <!-- <span class="add-on"><i class="icon-calendar"></i></span> -->
                            </div>    
                        </td>
                        <td>
                            <input class="span4 numbersOnly" type="text" id="LD_Total_Number_WH4" name="LD_Total_Number_WH4" >
                        </td>
                        <td>
                            <div class="input-append">
                                <input class="span6 date_pickr" type="text" id="LD_Date_RTW4" name="LD_Date_RTW4" placeholder="Select Date">
                                <!-- <span class="add-on"><i class="icon-calendar"></i></span> -->
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            </div>
        </div>

        <legend>Roster Details</legend>


        <!-- Select Basic -->
        <div class="control-group">
          <label class="control-label" for="Full_Time_Question" style="width: 200px;">
            <strong><sup>For full time employees, does the employee work a 20 day month?<sup></strong>
         </label>
          <div class="controls" style="margin-left: 230px !important;">
            <select id="Full_Time_Question" name="Full_Time_Question" class="selectpicker span2" required>
              <option>Yes</option>
              <option>No</option>
            </select>
          </div>
        </div>

        <div class="row-fluid span4 fl-l" style="margin-right: 20px;">

            <div class="control-group">
                <label class="control-label"><strong>Loading - Annual Leave Only</strong><br/><sup>(If applicable - Refer to EBA) <br/> Please specify any loadings applicable to the above weekly roster, OR where less than one week is taken, the hours applicable to the part week taken</sup></label>

                <div class="controls">
                    <table class="table table-striped table-bordered">
                        <thead>
                            <th>Hours</th>
                            <th>%</th>
                        </thead>
                        <tbody>
                            <tr>
                                <td><input id="Annual_Leave_Only_Hours1" name="Annual_Leave_Only_Hours1" type="text" placeholder="" class="input-mini numbersOnly"></td>
                                <td><input id="Annual_Leave_Percentage1" name="Annual_Leave_Percentage1" type="text" placeholder="" class="input-mini"></td>
                            </tr>
                            <tr>
                                <td><input id="Annual_Leave_Only_Hours2" name="Annual_Leave_Only_Hours2" type="text" placeholder="" class="input-mini numbersOnly"></td>
                                <td><input id="Annual_Leave_Percentage2" name="Annual_Leave_Percentage2" type="text" placeholder="" class="input-mini"></td>
                            </tr>
                            <tr>
                                <td><input id="Annual_Leave_Only_Hours3" name="Annual_Leave_Only_Hours3" type="text" placeholder="" class="input-mini numbersOnly"></td>
                                <td><input id="Annual_Leave_Percentage3" name="Annual_Leave_Percentage3" type="text" placeholder="" class="input-mini"></td>
                            </tr>
                            <tr>
                                <td><input id="Annual_Leave_Only_Hours4" name="Annual_Leave_Only_Hours4" type="text" placeholder="" class="input-mini numbersOnly"></td>
                                <td><input id="Annual_Leave_Percentage4" name="Annual_Leave_Percentage4" type="text" placeholder="" class="input-mini"></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>   
        </div>

        <div class="row span6 fl-l">
            <div class="control-group">
                <label class="control-label" for="Annual_Leave_Only_Hours"><strong>Public Holidays</strong> <br/>
                    <sup>Please specify any Public Holidays that fall during the period of leave</sup>
                </label>

                <div class="controls">
                    <table class="table table-striped table-bordered">
                        <thead>
                            <th>Date</th>
                            <th>Hours</th>
                            <th>%</th>
                        </thead>
                        <tbody>
                            <tr>
                                <td>
                                    <div class="input-append">
                                        <input id="Public_Holiday_Dates1" name="Public_Holiday_Dates1" type="text" placeholder="Select Date" class="span6 date_pickr">
                                        <span class="add-on"><i class="icon-calendar"></i>
                                    </div>
                                </td>
                                <td><input id="Public_Holiday_Hours1" name="Public_Holiday_Hours1" type="text" placeholder="" class="input-mini numbersOnly"></td>
                                <td><input id="Public_Holidays_Percentage1" name="Public_Holidays_Percentage1" type="text" placeholder="" class="input-mini"></td>
                            </tr>
                            <tr>
                                <td>
                                    <div class="input-append">
                                        <input id="Public_Holiday_Dates2" name="Public_Holiday_Dates2" type="text" placeholder="Select Date" class="span6 date_pickr">
                                        <span class="add-on"><i class="icon-calendar"></i>
                                    </div>

                                </td>
                                <td><input id="Public_Holiday_Hours2" name="Public_Holiday_Hours2" type="text" placeholder="" class="input-mini numbersOnly"></td>
                                <td><input id="Public_Holidays_Percentage2" name="Public_Holidays_Percentage2" type="text" placeholder="" class="input-mini"></td>
                            </tr>
                            <tr>
                                <td>
                                    <div class="input-append">
                                        <input id="Public_Holiday_Dates3" name="Public_Holiday_Dates3" type="text" placeholder="Select Date" class="span6 date_pickr">
                                        <span class="add-on"><i class="icon-calendar"></i>
                                    </div>
                                </td>
                                <td><input id="Public_Holiday_Hours3" name="Public_Holiday_Hours3" type="text" placeholder="" class="input-mini numbersOnly"></td>
                                <td><input id="Public_Holidays_Percentage3" name="Public_Holidays_Percentage3" type="text" placeholder="" class="input-mini"></td>
                            </tr>
                            <tr>
                                <td>
                                    <div class="input-append">
                                        <input id="Public_Holiday_Dates4" name="Public_Holiday_Dates4" type="text" placeholder="Select Date" class="span6 date_pickr">
                                        <span class="add-on"><i class="icon-calendar"></i>
                                    </div>
                                </td>
                                <td><input id="Public_Holiday_Hours4" name="Public_Holiday_Hours4" type="text" placeholder="" class="input-mini numbersOnly"></td>
                                <td><input id="Public_Holidays_Percentage4" name="Public_Holidays_Percentage4" type="text" placeholder="" class="input-mini"></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>   
        </div>

        </fieldset>

        <!-- <span><input type="checkbox" id="Save_As_Template" name="Save_As_Template" class="" value="Save as Template">  <strong>  Save as Template</strong></span> -->
        
        <div style="float: right;">
            <!-- <button class="btn btn-primary">Save</button> -->
            <input type='submit' class="btn btn-primary createReqBtn" value='Create Request'/>
            <input type="button" class="btn" value="Cancel" id="backHistory">
        </div>

        </form>

{% endblock %}